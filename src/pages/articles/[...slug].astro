---
import { getCollection } from 'astro:content';
export async function getStaticPaths() {
    const articleEntries = await getCollection('articles');
    return articleEntries.map((article) => ({
        params: { slug: article.slug },
        props: { article } 
    }));
}

import BaseLayout from '../../layouts/BaseLayout.astro';
const { article } = Astro.props;
const { Content } = await article.render();
---

<style is:global>
    .astro-code {
        padding: 1rem;
        border-radius: 0.5rem;
    }
    
    img {
        max-width: 100%;
        height: auto;
        aspect-ratio: 16/9;
    }
</style>

<style>
    .heading-img {
        width: 100%;
        max-height: 400px;
        object-fit: cover;

        filter: brightness(0.6);
    }
</style>

<BaseLayout title={ article.data.title }>
    <div class="container-fluid p-0">
        <div class="position-relative">
            <img src={ article.data.image.src } alt={ article.data.image.alt } class="img-fluid heading-img">
            <div class="position-absolute w-100 h-100 top-0 start-0 d-flex align-items-center justify-content-center">
                <h1 class="text-center text-white display-2">{ article.data.title }</h1>
            </div>
        </div>
        <div class="container px-3 py-5 fs-5">
            <p class="fs-">
                <i class="bx bx-calendar-alt" /> { article.data.publish_date.toLocaleDateString("en-US", {weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'}) }
                <br />
                <i class="bx bx-user" /> { article.data.author }
            </p>
            <hr>
            <Content />
        </div>
    </div>
</BaseLayout>